<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>×”×’×¨×œ×ª ×©× ×™ ××¡×¤×¨×™×</title>
<style>
    body {
        font-family: Arial, sans-serif;
        direction: rtl;
        text-align: center;
        background: #f4f4f4;
        padding: 20px;
    }
    .container {
        background: white;
        padding: 20px;
        border-radius: 15px;
        display: inline-block;
        box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    .numbers {
        display: flex;
        justify-content: center;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom: 15px;
    }
    .num-btn {
        border: none;
        padding: 15px;
        font-size: 1.2em;
        border-radius: 8px;
        cursor: pointer;
        transition: background 0.2s;
  
    
        background: linear-gradient(
    270deg,
    #4A90E2,
    #8e54e9,
    #43e97b,
    #f9d423,
    #f857a6,
    #4A90E2
  );
  background-size: 1200% 100%;
  animation: rainbow-move 8s linear infinite;
}
    

@keyframes rainbow-move {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 100% 50%;
  }
}
        
    .num-btn:hover {
        background: #bbb;
    }
    .selected {
        background: black !important;
        color: white;
        font-weight: bold;
    }
    input, button {
        padding: 10px;
        margin: 5px;
        font-size: 1em;
    }
    #passwordPopup {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.7);
        display: none;
        align-items: center;
        justify-content: center;
    }
    #passwordBox {
        background: white;
        padding: 20px;
        border-radius: 10px;
    }
    #balance {
        font-weight: bold;
    }
    .positive {
        color: green;
    }
    .negative {
        color: red;
    }
    .draw-results {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-top: 20px;
    }
    .chosen-box {
    display: inline-block;
   background: rgba(0, 128, 0, 0.7);
    color: white;
    font-size: 3em;
    font-weight: 600;
    padding: 15px 20px;
    border-radius: 10px;
    margin-top: 15px;
        margin-bottom:15px;
}
    
    .circle {
        width: 80px;
        height: 80px;
        background: orange;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 4em;
        font-weight: bold;
        color: white;
        box-shadow: 0 0 10px rgba(0,0,0,0.3);
    }
    #drawBtn {
        color: #fff;
    border: none;
    border-radius: 6px;
    padding: 12px 30px;
    font-size: 1.1em;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.2s, transform 0.1s;
    margin-bottom: 18px;
    box-shadow: 0 1px 6px #0001;
    letter-spacing: 1px;
    direction: rtl;
        background: linear-gradient(
    270deg,
    #4A90E2,
    #8e54e9,
    #43e97b,
    #f9d423,
    #f857a6,
    #4A90E2
  );
  background-size: 1200% 100%;
  animation: rainbow-move 4s linear infinite;
}

@keyframes rainbow-move {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 100% 50%;
  }
}
}
.gio {
  border: none;
  margin: 32px 0;
  height: 4px;
  width: 100%;
  opacity: 0.85;
  border-radius: 2px;
  box-shadow: 0 1px 4px rgba(74, 144, 226, 0.1);
  background: linear-gradient(
    270deg,
    #4A90E2,
    #8e54e9,
    #43e97b,
    #f9d423,
    #f857a6,
    #4A90E2
  );
  background-size: 1200% 100%;
  animation: rainbow-move 4s linear infinite;
}

@keyframes rainbow-move {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 100% 50%;
  }
}
    .gio2 {
  border: none;
  margin: 32px auto;
  height: 4px;
  width: 38%;
  opacity: 0.85;
  border-radius: 2px;
  box-shadow: 0 1px 4px rgba(74, 144, 226, 0.1);
  background: linear-gradient(
    270deg,
    #4A90E2,
    #8e54e9,
    #43e97b,
    #f9d423,
    #f857a6,
    #4A90E2
  );
  background-size: 1200% 100%;
  animation: rainbow-move 4s linear infinite;
}

@keyframes rainbow-move {
  0% {
    background-position: 0% 50%;
  }
  100% {
    background-position: 100% 50%;
  }
}
#drawBtn:hover {
    background: linear-gradient(90deg, #00b8d9 40%, #36b37e 100%);
    transform: translateY(-2px) scale(1.04);
}

label {
    font-size: 1em;
    color: #222;
    margin-left: 8px;
}
    #betAmount {
    font-size: 1em;
    padding: 7px 12px;
    border: 1.5px solid #36b37e;
    border-radius: 5px;
    background: #f9fffc;
    color: #222;
    width: 90px;
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
    direction: ltr;
}

#betAmount:focus {
    border-color: #00b8d9;
    box-shadow: 0 0 6px #00b8d933;
}
</style>
</head>
<body>

    <audio id="sndStart" src="coci124.mp3" preload="auto"></audio>
    
    <audio id="sndWin"  src="coci1235.mp3"  preload="auto"></audio>
<audio id="sndLose" src="coci123.mp3" preload="auto"></audio>
    <!-- 1ï¸âƒ£ ×ª×•×¦××•×ª ×”×”×’×¨×œ×” --><div id="chosenNumbers" class="chosen-box"></div>
<div class="container">

    <div class="draw-results">
        <div class="circle" id="result1">?</div>
        <div class="circle" id="result2">?</div>
    </div>
    <p id="result"></p>

    <!-- 2ï¸âƒ£ ×›×¤×ª×•×¨ ×”×’×¨×œ×” -->
    <button id="drawBtn">×”×’×¨×œ</button>

    <!-- 3ï¸âƒ£ ×¡×›×•× ×•×××–×Ÿ -->
    <div>
        <label>×¡×›×•× ×”×™××•×¨</label><br>
        <input type="number" id="betAmount" min="1" value="10" style="text-align: center;">    </div>
    <h3>×××–×Ÿ ×”×©×§×¢×” ×›×•×œ×œ: <span id="totalInvested">0</span> â‚ª</h3>
    <h3>×××–×Ÿ ×¨×•×•×—/×”×¤×¡×“: <span id="balance">0</span> â‚ª</h3>

    <!-- 4ï¸âƒ£ ×‘×—×™×¨×ª ××¡×¤×¨×™× -->
    <hr class="gio">
    <div class="numbers" id="col1Buttons"></div>

    <hr class="gio2">
    <div class="numbers" id="col2Buttons"></div>
<hr class="gio">
</div>

<!-- ×—×œ×•×Ÿ ×¡×™×¡××” -->
<div id="passwordPopup">
    <div id="passwordBox">
        <h3>×”×–×Ÿ ×¡×™×¡××” ×œ×”××©×š</h3>
        <input type="password" id="passwordInput" placeholder="×¡×™×¡××”">
        <br><br>
        <button id="passwordSubmit">××™×©×•×¨</button>
    </div>
</div>
<audio id="sndTick" src="sounds/tick.mp3" preload="auto"></audio>
    <!-- ×›×¤×ª×•×¨ ××™×¤×•×¡ -->
<button id="resetBtn" style="background:red; color:white; font-weight:bold; padding:10px 20px; border:none; border-radius:5px; margin-top:15px;">
    ××™×¤×•×¡
</button>

<!-- ×¤×•×¤××¤ ××™×©×•×¨ ××™×¤×•×¡ -->
<div id="resetPopup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); align-items:center; justify-content:center;">
    <div style="background:white; padding:20px; border-radius:10px; text-align:center; min-width:250px;">
        <h3>×”×× ×œ××¤×¡ ××ª ×›×œ ×”× ×ª×•× ×™×?</h3>
        <button id="confirmReset" style="background:green; color:white; padding:8px 15px; border:none; border-radius:5px; margin:5px;">×›×Ÿ</button>
        <button id="cancelReset" style="background:gray; color:white; padding:8px 15px; border:none; border-radius:5px; margin:5px;">×œ×</button>
    </div>
</div>
    
<script>
  // ×™×¦×™×¨×ª ×›×¤×ª×•×¨×™ ××¡×¤×¨×™×
  function createNumberButtons(containerId) {
    const container = document.getElementById(containerId);
    for (let i = 1; i <= 7; i++) {
      const btn = document.createElement("button");
      btn.innerText = i;
      btn.className = "num-btn";
      btn.addEventListener("click", function () {
        Array.from(container.children).forEach((b) => b.classList.remove("selected"));
        btn.classList.add("selected");
      });
      container.appendChild(btn);
    }
  }
  createNumberButtons("col1Buttons");
  createNumberButtons("col2Buttons");

  // ×§×™×¦×•×¨×™× ×œ××œ×× ×˜×™×
  const drawBtn = document.getElementById("drawBtn");
  const resultEl = document.getElementById("result");
  const popup = document.getElementById("passwordPopup");
  const sndWin  = document.getElementById("sndWin");
  const sndLose = document.getElementById("sndLose");
  const sndTick = document.getElementById("sndTick");
const sndStart = document.getElementById("sndStart");
  // × ×ª×•× ×™× ××”-localStorage
  let totalInvested = parseFloat(localStorage.getItem("totalInvested")) || 0;
  let balance = parseFloat(localStorage.getItem("balance")) || 0;
  let betCount = parseInt(localStorage.getItem("betCount")) || 0;
  let betsSincePassword = parseInt(localStorage.getItem("betsSincePassword")) || 0;

  // ×§×‘×•×¢×™ ×–××Ÿ ×œ×¡×¤×™×Ÿ ~3 ×©× ×™×•×ª
  const SLOWDOWN_START_MS = 2400; // ×”×ª×—×œ×ª ×”××˜×”
  const SPIN_DURATION_MS  = 3000; // ×¢×¦×™×¨×”

  updateDisplay();

  function getSelectedNumber(containerId) {
    const selectedBtn = Array.from(document.getElementById(containerId).children)
      .find((btn) => btn.classList.contains("selected"));
    return selectedBtn ? parseInt(selectedBtn.innerText) : null;
  }

  function updateDisplay() {
    document.getElementById("totalInvested").innerText = totalInvested;
    const balanceEl = document.getElementById("balance");
    balanceEl.innerText = balance;
    balanceEl.className = balance >= 0 ? "positive" : "negative";
  }

  // ×× ×™××¦×™×™×ª "×¨×™×¦×”" ×¢× ×”××˜×” + ×¡××•× ×“ ×˜×™×§
  function spinNumber(elementId, finalNumber, onDone) {
    let elapsed = 0;
    let delay = 50; // ××ª×—×™×œ×™× ××”×¨
    const el = document.getElementById(elementId);

    const timer = setInterval(() => {
      // ×˜×™×§ ×‘×›×œ ×©×™× ×•×™ ××¡×¤×¨
      try {
        if (!sndTick.paused) {
          sndTick.currentTime = 0;
        } else {
          sndTick.play().catch(() => {});
        }
      } catch (e) {}

      const num = Math.floor(Math.random() * 7) + 1;
      el.innerText = num;
      elapsed += delay;

      if (elapsed >= SLOWDOWN_START_MS) {
        delay += 20;
        clearInterval(timer);

        const slowTimer = setInterval(() => {
          try {
            if (!sndTick.paused) {
              sndTick.currentTime = 0;
            } else {
              sndTick.play().catch(() => {});
            }
          } catch (e) {}

          const n = Math.floor(Math.random() * 7) + 1;
          el.innerText = n;
          elapsed += delay;
          delay += 10;

          if (elapsed >= SPIN_DURATION_MS) {
            clearInterval(slowTimer);
            el.innerText = finalNumber;
            if (onDone) onDone();
          }
        }, delay);
      }
    }, delay);
  }

  // ×××–×™×Ÿ ×™×—×™×“ ×œ×›×¤×ª×•×¨ ×”×’×¨×œ×”
  drawBtn.addEventListener("click", function () {
    // ×›×œ 3 ×”×™××•×¨×™× â€“ ×‘×§×©×ª ×¡×™×¡××”
    if (betsSincePassword >= 3) {
      popup.style.display = "flex";
      return;
    }

    const col1 = getSelectedNumber("col1Buttons");
    const col2 = getSelectedNumber("col2Buttons");
    const betAmount = parseFloat(document.getElementById("betAmount").value);

    if (!col1 || !col2 || !betAmount || betAmount <= 0) {
  alert("×× × ×‘×—×¨ ××¡×¤×¨×™× ×•×¡×›×•× ×ª×§×™×Ÿ");
  return;
}

// × ×™×’×•×Ÿ ×¦×œ×™×œ ×”×ª×—×œ×”
try {
  sndStart.currentTime = 0;
  sndStart.volume = 0.9; // ××•×¤×¦×™×•× ×œ×™
  sndStart.play().catch(()=>{});
} catch(e){}

document.getElementById("chosenNumbers").innerText = `${col1}  |  ${col2}`;
    // ×œ×× ×•×¢ ×œ×—×™×¦×•×ª ×›×¤×•×œ×•×ª ×‘×–××Ÿ ×”×× ×™××¦×™×”
    drawBtn.disabled = true;

    const rand1 = Math.floor(Math.random() * 7) + 1;
    const rand2 = Math.floor(Math.random() * 7) + 1;

    totalInvested += betAmount;
    betCount++;
    betsSincePassword++;

    // ××¨×™×¦×™× ×•×©××™× ×ª×•×¦××”
    spinNumber("result1", rand1, finalize);
    spinNumber("result2", rand2);

    function finalize() {
  // ×¢×¦×™×¨×ª ×¦×œ×™×œ ×”×”×ª×—×œ×”
  try { 
    sndStart.pause(); 
    sndStart.currentTime = 0; 
  } catch(e){}

  const win = col1 === rand1 && col2 === rand2;

  // ×¡××•× ×“ ×œ×¤×™ ×ª×•×¦××”
  const s = win ? sndWin : sndLose;
  try {
    s.currentTime = 0;
    s.volume = 0.9;
    s.play().catch(()=>{});
  } catch(e){}
        
      if (win) {
        const prize = betAmount * 30;
        balance += prize;
        resultEl.innerHTML = `ğŸ‰ ×–×›×™×ª! ×”××¡×¤×¨×™× ×”×™×• ${rand1} ×•-${rand2}. ×–×›×™×ª ×‘-${prize} â‚ª`;
      } else {
        balance -= betAmount;
        resultEl.innerHTML = ` <br>××™×™×™×™ ×—×—×—<br>ğŸ˜¬ ×œ× × ×•×¨×, ××•×œ×™ ×‘×¤×¢× ×”×‘××” ğŸ˜¬`;
      }

      // ×©××™×¨×” ×‘-localStorage
      localStorage.setItem("totalInvested", totalInvested);
      localStorage.setItem("balance", balance);
      localStorage.setItem("betCount", betCount);
      localStorage.setItem("betsSincePassword", betsSincePassword);

      updateDisplay();
      drawBtn.disabled = false;
    }
  });

  // ××™×©×•×¨ ×¡×™×¡××”
  document.getElementById("passwordSubmit").addEventListener("click", function () {
    const pass = document.getElementById("passwordInput").value;
    if (pass === "1238") {
      popup.style.display = "none";
      document.getElementById("passwordInput").value = "";
      betsSincePassword = 0; // ××™×¤×•×¡ ××•× ×”
      localStorage.setItem("betsSincePassword", betsSincePassword);
    } else {
      alert("×¡×™×¡××” ×©×’×•×™×”");
    }
  });

  // ××™×¤×•×¡ × ×ª×•× ×™×
  const resetBtn = document.getElementById("resetBtn");
  const resetPopup = document.getElementById("resetPopup");
  const confirmReset = document.getElementById("confirmReset");
  const cancelReset = document.getElementById("cancelReset");

  resetBtn.addEventListener("click", () => {
    resetPopup.style.display = "flex";
  });

  cancelReset.addEventListener("click", () => {
    resetPopup.style.display = "none";
  });

  confirmReset.addEventListener("click", () => {
    localStorage.clear();
    totalInvested = 0;
    balance = 0;
    betCount = 0;
    betsSincePassword = 0;
    updateDisplay();
    document.getElementById("result").innerHTML = "";
    document.getElementById("result1").innerText = "?";
    document.getElementById("result2").innerText = "?";
    document.getElementById("chosenNumbers").innerText = "";
    resetPopup.style.display = "none";
  });
</script>
</body>
</html>
